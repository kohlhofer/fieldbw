---
import BaseLayout from '../layouts/BaseLayout.astro';

// Randomly select background image
const backgrounds = ['/bg1.jpeg', '/bg2.jpeg'];
const randomBg = backgrounds[Math.floor(Math.random() * backgrounds.length)];

const projects = [
  {
    name: 'Note Taker',
    description: 'Private, on-device meeting notes with AI.',
    url: '/note-taker',
    comingSoon: true
  },
  {
    name: 'DXC4',
    description: 'Finding structure in chess games and data',
    url: 'https://dxc4.com'
  },
  {
    name: 'MIDI Volume Control',
    description: 'Smooth, tactile sound control for macOS.',
    url: 'http://kohlhofer.com/midiVol/'
  },
  {
    name: 'Rock or Pop',
    description: 'Create and share mixtapes',
    url: 'https://rockorpop.com/'
  },
  {
    name: 'MapsAll',
    description: 'Mind-mapping powered by AI — ideas made spatial.',
    url: 'https://www.mapsall.com'
  }
];
---

<BaseLayout>
  <div class="relative min-h-screen flex flex-col">
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
      <img
        src={randomBg}
        alt="Background"
        class="w-full h-full object-cover"
      />
      <!-- Overlay for better text readability -->
      <div class="absolute inset-0 bg-black/40"></div>
    </div>

    <!-- Top Navigation -->
    <nav class="relative z-10 p-6 flex justify-end">
      <a
        href="/about"
        class="text-white/80 hover:text-white transition-colors duration-200 text-sm tracking-wide"
      >
        About
      </a>
    </nav>

    <!-- Center Content -->
    <div class="relative z-10 flex-1 flex items-center justify-center px-6">
      <div class="text-left">
        <h1 class="text-5xl md:text-7xl font-light text-white tracking-wide leading-none">
          <div>Field</div>
          <div>Bureau <span class="text-white/90">+</span></div>
          <div>Werkstatt</div>
        </h1>
      </div>
    </div>

    <!-- Bottom Project Links -->
    <div class="relative z-10 p-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 max-w-7xl">
        {projects.map((project, index) => (
          project.comingSoon ? (
            <div
              class="border-2 border-white/20 rounded-lg p-5 cursor-default bg-white/[0.10] hover:backdrop-blur-sm hover:bg-white/[0.12] transition-all duration-300 relative overflow-visible animate-fade-in-up"
              style={`animation-delay: ${index * 150}ms; opacity: 0;`}
            >
              <div class="absolute top-3 -right-1 bg-white rounded px-2 py-1 flex items-center">
                <span class="text-black text-[9px] font-medium uppercase" style="line-height: 1;">Coming Soon</span>
              </div>
              <h3 class="text-white font-medium text-base mb-2 drop-shadow-lg">
                {project.name}
              </h3>
              <p class="text-white/70 text-xs leading-relaxed drop-shadow-lg">
                {project.description}
              </p>
            </div>
          ) : (
            <a
              href={project.url}
              target="_blank"
              rel="noopener noreferrer"
              class="group border-2 border-white/20 rounded-lg p-5 bg-white/[0.10] hover:backdrop-blur-sm hover:bg-white/[0.12] hover:-translate-y-1 transition-all duration-300 animate-fade-in-up"
              style={`animation-delay: ${index * 150}ms; opacity: 0;`}
            >
              <h3 class="text-white font-medium text-base mb-2 group-hover:text-white/90 drop-shadow-lg">
                {project.name}
              </h3>
              <p class="text-white/70 text-xs leading-relaxed drop-shadow-lg">
                {project.description}
              </p>
            </a>
          )
        ))}
      </div>

      <!-- Footer -->
      <div class="mt-4 max-w-7xl mx-auto">
        <p class="text-center text-white/30 text-xs tracking-wide">
          Field Bureau <span class="text-white/20">+</span> Werkstatt
          <span class="mx-2 text-white/20">•</span>
          © {new Date().getFullYear()} Field Bureau & Werkstatt LLC. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</BaseLayout>
